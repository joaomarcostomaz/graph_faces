This C++ program analyzes a planar graph and identifies its faces by applying depth-first search (DFS) traversal. It leverages computational geometry principles to sort vertices based on polar angles. The output includes the number of faces and the vertex sequences that compose each face.

Each input is composed of several lines. The first line contains two integers, N and M, representing, respectively, the number of vertices and edges of the input graph G. It is guaranteed that G is connected, 1 ≤ N, M ≤ 10^5, and V(G) = {1,2,...,N}. The i-th line of the input starts with two real numbers xi, yi, representing the coordinates of vertex i in the Cartesian plane; it is ensured that −10^4 ≤ xi, yi ≤ 10^4. In the same line, there is a positive integer di, representing the degree of vertex i. Also, on the same line, there are di integers between 1 and N, each corresponding to a neighbor of i; it is guaranteed that a vertex is not a neighbor of itself.

The first line of the output contains an integer F, which should be equal to the number of faces of G. The next F lines should correspond to the F faces of G; each line starts with an integer si, representing the size of the i-th face of G. Following that, there are si integers representing the circuit corresponding to the boundary of the face. The order of the faces is not important, but consecutive vertices on the boundary of the face should be adjacent.